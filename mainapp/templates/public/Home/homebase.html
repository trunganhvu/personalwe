<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <title>VÅ© Trung Anh</title>
        <meta content="" name="description">
        <meta content="" name="keywords">
        {% load static %}
        <!-- Favicons -->
        <link href="{% static 'image/icon/icon-tab.jpg' %}" rel="icon">
        <link href="{% static 'image/icon/icon-tab.jpg' %}" rel="apple-touch-icon">
        <!-- Google Fonts -->
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Satisfy" rel="stylesheet">
        <!-- Vendor CSS Files -->
        <link href="{% static 'assets/vendor/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">
        <link href="{% static 'assets/vendor/icofont/icofont.min.css' %}" rel="stylesheet">
        <link href="{% static 'assets/vendor/boxicons/css/boxicons.min.css' %}" rel="stylesheet">
        <link href="{% static 'assets/vendor/owl.carousel/assets/owl.carousel.min.css' %}" rel="stylesheet">
        <link href="{% static 'assets/vendor/venobox/venobox.css' %}" rel="stylesheet">
        <!-- Template Main CSS File -->
        <link href="{% static 'assets/css/style.css' %}" rel="stylesheet">
    </head>
    <body>
        {% block section %}{% endblock %}
        <!-- Vendor JS Files -->
        <script src="{% static 'assets/vendor/jquery/jquery.min.js' %}"></script>
        <script src="{% static 'assets/vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
        <script src="{% static 'assets/vendor/jquery.easing/jquery.easing.min.js' %}"></script>
        <script src="{% static 'assets/vendor/php-email-form/validate.js' %}"></script>
        <script src="{% static 'assets/vendor/waypoints/jquery.waypoints.min.js' %}"></script>
        <script src="{% static 'assets/vendor/counterup/counterup.min.js' %}"></script>
        <script src="{% static 'assets/vendor/owl.carousel/owl.carousel.min.js' %}"></script>
        <script src="{% static 'assets/vendor/isotope-layout/isotope.pkgd.min.js' %}"></script>
        <script src="{% static 'assets/vendor/venobox/venobox.min.js' %}"></script>
        <!-- Template Main JS File -->
        <script src="{% static 'assets/js/main.js' %}"></script>
    </body>
    <script type="text/javascript">
        function fetchApi(api){
            const response = fetch(api)
            .then(function(response) {
                if(!response.ok) throw new Error("HTTP error, status = " + response.status);
                let myjson_data = response.json();
                return myjson_data;
            })
            .then(function(mydata){
                if (Object.keys(mydata).length == 0){
                    return {'message': ''};
                }
                else {
                    return mydata;
                }
            })
            .catch(function(error) {
                console.log("error");
                return {'message': 'error'};
            })
            return response;
        }
        window.onload = function() {
            let api = window.location.protocol + '//' + window.location.host + '/api/header/';
            let header = fetchApi(api);
            let header_promise = Promise.resolve(header);
            header_promise.then(function(value) {
                document.getElementById("hero").setAttribute('style', 'background: url(' + value.path + ') !important');
            })
        };
    </script>
</html>